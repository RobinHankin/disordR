<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The `disordR` package: design philosophy and a use-case in multivariate polynomials • disordR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The `disordR` package: design philosophy and a use-case in multivariate polynomials">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">disordR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9-8-4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/disordR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/disindex.html">Disordered indices with the `disordR` package: an introduction to class `disindex`</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinHankin/disordR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>The `disordR` package: design philosophy and a use-case in multivariate polynomials</h1>
                        <h4 data-toc-skip class="author">Robin K. S.
Hankin</h4>
            
            <h4 data-toc-skip class="date">2024-08-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/RobinHankin/disordR/blob/master/vignettes/disordR.Rmd" class="external-link"><code>vignettes/disordR.Rmd</code></a></small>
      <div class="d-none name"><code>disordR.Rmd</code></div>
    </div>

    
    
<p><img src="../../../_temp/Library/disordR/help/figures/disordR.png" width="20%" style="float:right; padding:10px"></p>
<div class="section level4">
<h4 id="abstract">Abstract<a class="anchor" aria-label="anchor" href="#abstract"></a>
</h4>
<p>To cite the <code>disordR</code> package in publications please use
<span class="citation">Hankin (2022)</span>. This document motivates the
concept of “disordered vector” using coefficients of multivariate
polynomials as represented by associative maps such as the
<code>STL</code> map class as used by the <code>mvp</code> package.
Values and keys of a map are stored in an implementation-specific way so
certain extraction and replacement operations should be forbidden. For
example, consider a finite set <code>S</code> of real numbers. The
“first” element of <code>S</code> is implementation specific (because a
set does not specify the order of its elements)…but the maximum value of
<code>S</code> has a well-defined value, as does the sum. The
<code>disordR</code> package makes it impossible to execute forbidden
operations (such as finding the “first” element), while allowing
transparent R idiom for permitted operations such as finding the maximum
or sum. Note that one cannot dispense with order entirely, as we wish to
consider keys and values of <code>STL</code> objects separately, but we
need to retain the ability to match individual keys with their
corresponding values.</p>
<p>An illustrative R session is given in which the <code>disordR</code>
package is used abstractly, without reference to any particular
application, and then shows how the <code>disordR</code> package is used
in the <code>mvp</code> package. <code>disordR</code> is used in the
<code>clifford</code>, <code>freealg</code>, <code>hyper2</code>,
<code>mvp</code>, <code>spray</code>, <code>stokes</code>, and
<code>weyl</code> packages.</p>
</div>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>In <code>C++</code> <span class="citation">(ISO Central Secretary
1998)</span>, the <code>STL map</code> class <span class="citation">(Josuttis 1999)</span> is an object that associates a
value to each of a set of keys. Accessing values or keys of a
<code>map</code> object is problematic because the value-key pairs are
not stored in a well-defined order. The situation is applicable to any
package which uses the <code>map</code> objects. Consider, for example,
the <code>mvp</code> package which deals with multinomials using
<code>STL</code> maps. An <code>mvp</code> object is a map from terms to
coefficients, and a map has no intrinsic ordering: the maps</p>
<pre><code>x -&gt; 1, y -&gt; 3, xy -&gt; 3, xy^3 -&gt; 4</code></pre>
<p>and</p>
<pre><code>xy^3 -&gt; 4, xy -&gt; 3, x -&gt; 1, y -&gt; 3</code></pre>
<p>are the same map and correspond to the same multinomial
(symbolically,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mn>3</mn><mi>y</mi><mo>+</mo><mn>3</mn><mi>x</mi><mi>y</mi><mo>+</mo><mn>4</mn><mi>x</mi><msup><mi>y</mi><mn>3</mn></msup><mo>=</mo><mn>4</mn><mi>x</mi><msup><mi>y</mi><mn>3</mn></msup><mo>+</mo><mn>3</mn><mi>x</mi><mi>y</mi><mo>+</mo><mi>x</mi><mo>+</mo><mn>3</mn><mi>y</mi></mrow><annotation encoding="application/x-tex">x+3y+3xy+4xy^3=4xy^3+3xy+x+3y</annotation></semantics></math>).
Thus the coefficients of the multinomial might be
<code>c(1,3,3,4)</code> or <code>c(4,3,1,3)</code>, or indeed any
ordering. Internally, the elements are stored in some order but the
order used is implementation-specific. Quite often, I am interested in
the coefficients <em>per se</em>, without consideration of their meaning
in the context of a multivariate polynomial. I might ask:</p>
<ul>
<li>“How many coefficients are there?”</li>
<li>“What is the largest coefficient?”</li>
<li>“Are any coefficients exactly equal to one?”</li>
<li>“How many coefficients are greater than 2?”</li>
</ul>
<p>These are reasonable and mathematically meaningful questions because
they have an answer that is independent of the order in which the
coefficients are stored. Compare a meaningless question: “what is the
second coefficient?”. This is meaningless because of the order ambiguity
discussed above: the answer is at best implementation-specific, but
fundamentally it is a question that one should not be allowed to
ask.</p>
<p>To deal with the coefficients in isolation in R, one might be tempted
to use a multiset. However, this approach does not allow one to link the
coefficients with the terms. Suppose I coerce the coefficients to a
multiset object (as per the <code>sets</code> package, for example):
then it is impossible to extract the terms with coefficient greater than
2 (which would be the polynomial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>y</mi><mo>+</mo><mn>3</mn><mi>x</mi><mi>y</mi><mo>+</mo><mn>4</mn><mi>x</mi><msup><mi>y</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">3y+3xy+4xy^3</annotation></semantics></math>)
because the link between the coefficients and the terms is not included
in the multiset object. Sensible questions involving this aspect of
<code>mvp</code> objects might be:</p>
<ul>
<li>Give me all terms with coefficients greater than 2</li>
<li>Give me all terms with positive coefficients</li>
<li>Give me all terms with integer coefficients</li>
</ul>
<p>and these questions cannot be answered if the the coefficients are
stored as a multiset (compare inadmissible questions such as “give me
the first three terms”). Further note that replacement methods are
mathematically meaningful, for example:</p>
<ul>
<li>Set any term with a negative coefficient to zero</li>
<li>Add 100 to any coefficient less than 30</li>
</ul>
<p>Again these operations are reasonable but precluded by multiset
formalism (compare inadmissible replacements: “replace the first two
terms with zero”, or “double the last term” would be inadmissible).</p>
<p><strong><em>What we need is a system that forbids stupid questions
and stupid operations, while permitting sensible questions and
operations</em></strong></p>
<p>The <code>disord</code> class of the <code>disordR</code> package is
specificially designed for this situation. This class of object has a
slot for the coefficients in the form of a numeric R vector, but also
another slot which uses hash codes to prevent users from misusing the
ordering of the numeric vector.</p>
<p>For example, a multinomial <code>x+2y+3z</code> might have
coefficients <code>c(1,2,3)</code> or <code>c(3,1,2)</code>. Package
idiom to extract the coefficients of a multivariate polynomial
<code>a</code> is <code>coeffs(a)</code>; but this cannot return a
standard numeric vector. If stored as a numeric vector, the user might
ask “what is the first element?” and this question should not be asked
[and certainly not answered!], because the elements are stored in an
implementation-specific order. The <code>disordR</code> package uses
<code>disord</code> objects which are designed to return an error if
such inadmissible questions are asked. But <code>disord</code> objects
can answer admissible questions and perform admissible operations.</p>
<p>Suppose we have two multivariate polynomials, <code>a</code> as
defined as above with <code>a=x+2y+3z</code> and <code>b=x+3y+4z</code>.
Even though the sum <code>a+b</code> is well-defined algebraically,
idiom such as <code>coeffs(a) + coeffs(b)</code> is not defined because
there is no guarantee that the coefficients of the two multivariate
polynomials are stored in the same order. We might have
<code>c(1,2,3)+c(1,3,4)=c(2,5,7)</code> or
<code>c(1,2,3)+c(1,4,3)=c(2,6,6)</code>, with neither being more
“correct” than the other. In the package, this ambiguity is rendered
void: <code>coeffs(a) + coeffs(b)</code> will return an error. Note
carefully that <code>a+b</code>—and hence <code>coeffs(a+b)</code>—is
perfectly well defined, although the result is subject to the same
ambiguity as <code>coeffs(a)</code>.</p>
<p>In the same way, <code>coeffs(a) + 1:3</code> is not defined and will
return an error. Further, idiom such as
<code>coeffs(a) &lt;- 1:3</code>and
<code>coeffs(a) &lt;- coeffs(b)</code> are not defined and will also
return an error. However, note that</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">7</span></span></code></pre>
<p>are perfectly well defined, with package idiom behaving as
expected.</p>
<p>Idiom such as <code>disord(a) &lt;- disord(a)^2</code> is OK: one
does not need to know the order of the coefficients on either side, so
long as the order is the same on both sides. The idiomatic English
equivalent would be: “the coefficient of each term of <code>a</code>
becomes its square”; note that this operation is insensitive to the
order of coefficients. The whole shebang is intended to make idiom such
as <code>coeffs(a) &lt;- coeffs(a)%%2</code> possible, so we can
manipulate polynomials over finite rings, here
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mi>/</mi><mn>2</mn><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z/2Z</annotation></semantics></math>.</p>
<p>The replacement methods are defined so that an expression like
<code>coeffs(a)[coeffs(a) &lt; 5] &lt;- 0</code> works as expected; the
English idiom would be “replace any coefficient less than 5 with 0”.</p>
<p>To fix ideas, consider a fixed small mvp object:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/RobinHankin/mvp" class="external-link">"mvp"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: magrittr</span></span></code></pre>
<pre><code><span><span class="co">## Loading required package: mpoly</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'mvp'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:mpoly':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     is.constant, vars</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     trunc</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/mvp.html" class="external-link">as.mvp</a></span><span class="op">(</span><span class="st">"5 a c^3 + a^2 d^2 f^2 + 4 a^3 b e^3 + 3 b c f + 2 b^2 e^3"</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 5 a c^3 + a^2 d^2 f^2 + 4 a^3 b e^3 + 3 b c f + 2 b^2 e^3</span></span></code></pre>
<p>Extraction presents issues; consider <code>coeffs(a)&lt;3</code>.
This object has Boolean elements but has the same ordering ambiguity as
<code>coeffs(a)</code>. One might expect that we could use this to
extract elements of <code>coeffs(a)</code>: specifically, those elements
less than 5. We may use replace methods for coefficients if this makes
sense. Idiom such as</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">a</span>,<span class="fl">3</span><span class="op">)</span></span></code></pre>
<p>is algebraically meaningful and allowed in the package.
Idiomatically: “Add 4 to any element less than 5”; “coefficients become
the parallel maximum of themselves and 3” respectively. Further note
that <code>coeffs(a) &lt;- rev(coeffs(a))</code> is disallowed (although
<code>coeffs(a) &lt;- rev(rev(coeffs(a)))</code> is meaningful and
admissible).</p>
<p>So the output of <code>coeffs(x)</code> is defined only up to an
unknown rearrangement. The same considerations apply to the output of
<code><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">vars()</a></code>, which returns a list of character vectors in an
undefined order, and the output of <code><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">powers()</a></code>, which returns
a numeric list whose elements are in an undefined order. However, even
though the order of these three objects is undefined individually, their
ordering is jointly consistent in the sense that the first element of
<code>coeffs(x)</code> corresponds to the first element of
<code>vars(x)</code> and the first element of <code>powers(x)</code>.
The identity of this element is not defined—but whatever it is, the
first element of all three accessor methods refers to it.</p>
<p>Note also that a single term (something like <code>4a3*b*c^6</code>)
has the same issue: the variables are not stored in a well-defined
order. This does not matter because the algebraic value of the term does
not depend on the order in which the variables appear and this term
would be equivalent to <code>4bc^6*a^3</code>.</p>
</div>
<div class="section level4">
<h4 id="an-r-session-with-the-disordr-package">An R session with the <code>disordR</code> package<a class="anchor" aria-label="anchor" href="#an-r-session-with-the-disordr-package"></a>
</h4>
<p>We will use the <code>disordR</code> package to show how the idiom
works.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/RobinHankin/disordR" class="external-link">"disordR"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: Matrix</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rdis.html">rdis</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 9 4 7 1 2 7 2 3 1</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Object <code>a</code> is a <code>disord</code> object but it behaves
similarly to a regular numeric vector in many ways:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">^</span><span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 81 16 49  1  4 49  4  9  1</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">+</span><span class="fl">1</span><span class="op">/</span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 9.111111 4.250000 7.142857 2.000000 2.500000 7.142857 2.500000 3.333333</span></span>
<span><span class="co">## [9] 2.000000</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Above, note how the result has the same hash code as <code>a</code>.
Other operations that make sense are <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code> and
<code><a href="../reference/misc.html">sort()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 9</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/misc.html">sort</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1 1 2 2 3 4 7 7 9</span></span></code></pre>
<p>Above, see how the result is a standard numeric vector. However,
inadmissible operations give an error:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>  <span class="co"># asking for the first element is inadmissible</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in .local(x, i, j = j, ..., drop): if using a regular index to extract, must extract each element once and once only (or none of them)</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1000</span> <span class="co"># also cannot replace the first element</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in .local(x, i, j = j, ..., value): if using a regular index to replace, must specify each element once and once only</span></span></code></pre>
<p>Standard R semantics generally work as expected:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="va">a</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 9.111111 4.250000 7.142857 2.000000 2.500000 7.142857 2.500000 3.333333</span></span>
<span><span class="co">## [9] 2.000000</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">*</span><span class="fl">2</span><span class="op">-</span><span class="fl">9</span></span>
<span><span class="va">y</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1]  9 -1  5 -7 -5  5 -5 -3 -7</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">+</span><span class="va">y</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 18.1111111  3.2500000 12.1428571 -5.0000000 -2.5000000 12.1428571 -2.5000000</span></span>
<span><span class="co">## [8]  0.3333333 -5.0000000</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Above, observe that objects <code>a</code>, <code>x</code> and
<code>y</code> have the same hash code: they are “compatible”, in
<code>disordR</code> idiom. However, if we try to combine object
<code>a</code> with another object with different hash, we get
errors:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rdis.html">rdis</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4f6517888ffa67c6e3800ed6eb7395f62e34db52 and elements</span></span>
<span><span class="co">## [1] 5 6 7 9 5 5 9 9 5</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 9 4 7 1 2 7 2 3 1</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">+</span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## disordR discipline error in:</span></span></code></pre>
<pre><code><span><span class="co">## a + b</span></span></code></pre>
<pre><code><span><span class="co">## Error in check_matching_hash(e1, e2, match.call()): </span></span>
<span><span class="co">## hash codes d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and 4f6517888ffa67c6e3800ed6eb7395f62e34db52 do not match</span></span></code></pre>
<p>The error is given because objects <code>a</code> and <code>b</code>
are stored in an implementation-specific order (we say that
<code>a</code> and <code>b</code> are <em>incompatible</em>). In the
package, many extract and replace methods are implemented whenever this
is admissible:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">[</span><span class="va">a</span><span class="op">&lt;</span><span class="fl">0.5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>  <span class="co"># round down</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash d3cf9c0527c961f53f3447919cf01bc8ed4c11b0 and elements</span></span>
<span><span class="co">## [1] 9 4 7 1 2 7 2 3 1</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span><span class="op">[</span><span class="va">b</span><span class="op">&gt;</span><span class="fl">0.6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">[</span><span class="va">b</span><span class="op">&gt;</span><span class="fl">0.6</span><span class="op">]</span> <span class="op">+</span> <span class="fl">3</span>  <span class="co"># add 3 to every element greater than 0.6</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4f6517888ffa67c6e3800ed6eb7395f62e34db52 and elements</span></span>
<span><span class="co">## [1]  8  9 10 12  8  8 12 12  8</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Usual semantics follow, provided one is careful to maintain the hash
code:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/disordR/man/disord.html" class="external-link">disord</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">d</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4183ce3f68544f4314c28ac4b1e9eccf8b249bc5 and elements</span></span>
<span><span class="co">##  [1]  1  2  3  4  5  6  7  8  9 10</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fl">10</span> <span class="op">+</span> <span class="fl">3</span><span class="op">*</span><span class="va">d</span> <span class="op">-</span> <span class="va">d</span><span class="op">^</span><span class="fl">2</span></span>
<span><span class="va">e</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4183ce3f68544f4314c28ac4b1e9eccf8b249bc5 and elements</span></span>
<span><span class="co">##  [1]  12  12  10   6   0  -8 -18 -30 -44 -60</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span><span class="op">&lt;</span><span class="fl">4</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4183ce3f68544f4314c28ac4b1e9eccf8b249bc5 and elements</span></span>
<span><span class="co">##  [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span><span class="op">[</span><span class="va">e</span><span class="op">&lt;</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">e</span><span class="op">[</span><span class="va">e</span><span class="op">&lt;</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="va">d</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 4183ce3f68544f4314c28ac4b1e9eccf8b249bc5 and elements</span></span>
<span><span class="co">##  [1]   1   2   3   4   0  -8 -18 -30 -44 -60</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Above, the replacement command works because <code>d</code> and
<code>e</code> <em>and</em> <code>e&lt;4</code> [which is a Boolean
<code>disord</code> object] all have the same hash code.</p>
</div>
<div class="section level2">
<h2 id="an-r-session-with-the-mvp-package">An R session with the <code>mvp</code> package<a class="anchor" aria-label="anchor" href="#an-r-session-with-the-mvp-package"></a>
</h2>
<p>The <code>mvp</code> package implements multivariate polynomials
using the <code>STL</code> map class. Following commands only work as
intended here with <code>mvp &gt;= 1.0-12</code>. Below we see how
<code>disordR</code> idiom allows mathematically meaningful operation
while suppressing inadmissible ones:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/RobinHankin/mvp" class="external-link">"mvp"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/rmvp.html" class="external-link">rmvp</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/rmvp.html" class="external-link">rmvp</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 3 a b^9 e^4 f + 7 a^2 b^4 d^6 e f^4 + 4 a^4 b^6 c^5 d^11 f^4 + 6 a^6 b^3 c^14</span></span>
<span><span class="co">## f^2 + 5 a^11 e^6 f^6 + b^8 e^7 f^12 + 2 b^10 d^10 f^4</span></span></code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 5 a c^2 e^8 f^7 + 4 a^2 b^5 c^6 e^3 + 7 a^2 b^7 c^4 d e^2 + a^4 d^6 e^5 f + 6</span></span>
<span><span class="co">## a^6 d^6 f^6 + 3 b^7 c^7 e^5 + 2 b^10 c^3 f^7</span></span></code></pre>
<p>Observe that standard multivariate polynomial algebra works:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">+</span> <span class="fl">2</span><span class="op">*</span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 3 a b^9 e^4 f + 10 a c^2 e^8 f^7 + 7 a^2 b^4 d^6 e f^4 + 8 a^2 b^5 c^6 e^3 + 14</span></span>
<span><span class="co">## a^2 b^7 c^4 d e^2 + 4 a^4 b^6 c^5 d^11 f^4 + 2 a^4 d^6 e^5 f + 6 a^6 b^3 c^14</span></span>
<span><span class="co">## f^2 + 12 a^6 d^6 f^6 + 5 a^11 e^6 f^6 + 6 b^7 c^7 e^5 + b^8 e^7 f^12 + 4 b^10</span></span>
<span><span class="co">## c^3 f^7 + 2 b^10 d^10 f^4</span></span></code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">a</span><span class="op">+</span><span class="va">b</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">a</span><span class="op">-</span><span class="va">b</span><span class="op">)</span> <span class="op">==</span> <span class="va">a</span><span class="op">^</span><span class="fl">2</span><span class="op">-</span><span class="va">b</span><span class="op">^</span><span class="fl">2</span>   <span class="co"># should be TRUE (expression is quite long)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>We can extract the coefficients of these polynomials using the
<code><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs()</a></code> function:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 76b070e3d27bf2e3a548b56a02678d79881de0ce and elements</span></span>
<span><span class="co">## [1] 3 7 4 6 5 1 2</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 40b9beff42bebe889cb596f78d096c90ef279834 and elements</span></span>
<span><span class="co">## [1] 5 4 7 1 6 3 2</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>observe that the coefficients are returned as a <code>disord</code>
object. We may manipulate the coefficients of a polynomial in many ways.
We may do the following things:</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>   <span class="co"># set any coefficient of a that is &lt;4 to zero</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 7 a^2 b^4 d^6 e f^4 + 4 a^4 b^6 c^5 d^11 f^4 + 6 a^6 b^3 c^14 f^2 + 5 a^11 e^6</span></span>
<span><span class="co">## f^6</span></span></code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span><span class="fl">2</span>       <span class="co"># consider coefficients of b modulo 2</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## a c^2 e^8 f^7 + a^2 b^7 c^4 d e^2 + a^4 d^6 e^5 f + b^7 c^7 e^5</span></span></code></pre>
<p>However, many operations which have reasonable idiom are in fact
meaningless and are implicitly prohibited. For example:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/rmvp.html" class="external-link">rmvp</a></span><span class="op">(</span><span class="op">)</span>     <span class="co"># set up new mvp objects x and y</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/rmvp.html" class="external-link">rmvp</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then the following should all produce errors:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>  <span class="co"># order implementation specific</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## disordR discipline error in:</span></span></code></pre>
<pre><code><span><span class="co">## coeffs(x) + coeffs(y)</span></span></code></pre>
<pre><code><span><span class="co">## Error in check_matching_hash(e1, e2, match.call()): </span></span>
<span><span class="co">## hash codes 70fa3d05d5b2549b4c29d1938fe380f5d49d9844 and 7e74a4c559eedc67cc7ac322e8b61c2e4dbe7e71 do not match</span></span></code></pre>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># ditto</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in `coeffs&lt;-.mvp`(`*tmp*`, value = new("disord", .Data = c(5, 2, : consistent(vars(x), value) is not TRUE</span></span></code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>       <span class="co"># replacement value not length 1</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## disordR discipline error in:</span></span></code></pre>
<pre><code><span><span class="co">## .local(x = x, i = i, j = j, value = value)</span></span></code></pre>
<pre><code><span><span class="co">## Error in check_matching_hash(x, value, match.call()): </span></span>
<span><span class="co">## cannot combine disord object with hash code 70fa3d05d5b2549b4c29d1938fe380f5d49d9844 with a vector</span></span></code></pre>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## disordR discipline error in:</span></span></code></pre>
<pre><code><span><span class="co">## .local(x = x, i = i, j = j, drop = drop)</span></span></code></pre>
<pre><code><span><span class="co">## Error in check_matching_hash(x, i, match.call()): </span></span>
<span><span class="co">## hash codes 70fa3d05d5b2549b4c29d1938fe380f5d49d9844 and 7e74a4c559eedc67cc7ac322e8b61c2e4dbe7e71 do not match</span></span></code></pre>
<div class="section level3">
<h3 id="vars-and-powers-return-disord-objects">
<code>vars()</code> and <code>powers()</code> return
<code>disord</code> objects<a class="anchor" aria-label="anchor" href="#vars-and-powers-return-disord-objects"></a>
</h3>
<p>The <code><a href="https://rdrr.io/pkg/disordR/man/disord.html" class="external-link">disord()</a></code> function takes a list argument, and this is
useful for working with <code>mvp</code> objects:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/mvp.html" class="external-link">as.mvp</a></span><span class="op">(</span><span class="st">"x^2 + 4 - 3*x*y*z"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 4 - 3 x y z + x^2</span></span></code></pre>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 9395842c6e67dfb0be871e04b3a8964a1c9b9bd5 and elements</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] "x" "y" "z"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] "x"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">powers</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 9395842c6e67dfb0be871e04b3a8964a1c9b9bd5 and elements</span></span>
<span><span class="co">## [[1]]</span></span>
<span><span class="co">## integer(0)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 1 1 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## A disord object with hash 9395842c6e67dfb0be871e04b3a8964a1c9b9bd5 and elements</span></span>
<span><span class="co">## [1]  4 -3  1</span></span>
<span><span class="co">## (in some order)</span></span></code></pre>
<p>Note that the hash of all three objects is identical, generated from
the polynomial itself (not just the relevant element of the
three-element list that is an <code>mvp</code> object). This allows us
to do some rather interesting things:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">double</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fl">2</span><span class="op">*</span><span class="va">x</span><span class="op">}</span></span>
<span><span class="op">(</span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/rmvp.html" class="external-link">rmvp</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## a^2 c^10 d^2 f^2 + 7 a^3 d^5 e^14 + 6 a^5 c^7 d^4 e^2 + 4 a^8 c d^5 e^6 + 2 b^2</span></span>
<span><span class="co">## c^4 d^10 e^5 f + 5 b^2 c^6 d^2 e^7 f^6 + 3 c^6 d^4 e^2 f^6</span></span></code></pre>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">powers</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">va</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">ca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">pa</span><span class="op">[</span><span class="va">ca</span><span class="op">&lt;</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/misc.html">sapply</a></span><span class="op">(</span><span class="va">pa</span>,<span class="va">double</span><span class="op">)</span><span class="op">[</span><span class="va">ca</span><span class="op">&lt;</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/mvp.html" class="external-link">mvp</a></span><span class="op">(</span><span class="va">va</span>,<span class="va">pa</span>,<span class="va">ca</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 7 a^3 d^5 e^14 + a^4 c^20 d^4 f^4 + 6 a^5 c^7 d^4 e^2 + 4 a^8 c d^5 e^6 + 5 b^2</span></span>
<span><span class="co">## c^6 d^2 e^7 f^6 + 2 b^4 c^8 d^20 e^10 f^2 + 3 c^12 d^8 e^4 f^12</span></span></code></pre>
<p>Above, <code>a</code> was a multivariate polynomial and we doubled
the powers of all variables in terms with coefficients less than 4. Or
even:</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/mvp.html" class="external-link">as.mvp</a></span><span class="op">(</span><span class="st">"3 + 5*a*b - 7*a*b*x^2 + 2*a*b^2*c*d*x*y -6*x*y + 8*a*b*c*d*x"</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 3 + 5 a b + 8 a b c d x - 7 a b x^2 + 2 a b^2 c d x y - 6 x y</span></span></code></pre>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">powers</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">va</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">ca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mvp/man/coeffs.html" class="external-link">coeffs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">va</span><span class="op">[</span><span class="fu"><a href="../reference/misc.html">sapply</a></span><span class="op">(</span><span class="va">pa</span>,<span class="va">length</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/misc.html">sapply</a></span><span class="op">(</span><span class="va">va</span>,<span class="va">toupper</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="../reference/misc.html">sapply</a></span><span class="op">(</span><span class="va">pa</span>,<span class="va">length</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mvp/man/mvp.html" class="external-link">mvp</a></span><span class="op">(</span><span class="va">va</span>,<span class="va">pa</span>,<span class="va">ca</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## mvp object algebraically equal to</span></span>
<span><span class="co">## 3 + 8 A B C D X + 2 A B^2 C D X Y + 5 a b - 7 a b x^2 - 6 x y</span></span></code></pre>
<p>Above, we took multivariate polynomial <code>a</code> and replaced
the variable names in every term with more than four variables with
their uppercase equivalents.</p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-hankin2022_disordR" class="csl-entry">
Hankin, Robin K. S. 2022. <span>“Disordered Vectors in <span>R</span>:
Introducing the disordR Package.”</span> arXiv. <a href="https://doi.org/10.48550/ARXIV.2210.03856" class="external-link">https://doi.org/10.48550/ARXIV.2210.03856</a>.
</div>
<div id="ref-ISO14882" class="csl-entry">
ISO Central Secretary. 1998. <span>“Programming
Languages—<span>C</span>++. <span>ISO</span>/<span>IEC</span>
144882.”</span> First. American National Standard Institute.
</div>
<div id="ref-josuttis1999" class="csl-entry">
Josuttis, N. M. 1999. <em>The c++ Standard Library: A Tutorial and
Reference</em>. Addison-Wesley.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin K. S. Hankin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
